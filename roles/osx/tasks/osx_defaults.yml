---

# TODO: Avoid "type: string" commands until this issue is resolved:
# https://github.com/ansible/ansible-modules-extras/issues/1742

# General UI/UX
# ------------------------------------------------------------------------------

# Possible values: `WhenScrolling`, `Automatic` and `Always`
# - name: Always show scrollbars
#   osx_defaults:
#     domain: NSGlobalDomain
#     key: AppleShowScrollBars
#     type: string
#     value: "Always"
#   notify:
#     - killall

- name: Expand save panel by default
  osx_defaults:
    domain: NSGlobalDomain
    key: NSNavPanelExpandedStateForSaveMode
    type: bool
    value: true
  notify:
    - killall

- name: Expand print panel by default
  osx_defaults:
    domain: NSGlobalDomain
    key: PMPrintingExpandedStateForPrint
    type: bool
    value: true
  notify:
    - killall

- name: Save to disk (not to iCloud) by default
  osx_defaults:
    domain: NSGlobalDomain
    key: NSDocumentSaveNewDocumentsToCloud
    type: bool
    value: false
  notify:
    - killall

- name: Automatically quit printer app once the print jobs complete
  osx_defaults:
    domain: com.apple.print.PrintingPrefs
    key: "Quit When Finished"
    type: bool
    value: true
  notify:
    - killall

- name: Disable the “Are you sure you want to open this application?” dialog
  osx_defaults:
    domain: com.apple.LaunchServices
    key: LSQuarantine
    type: bool
    value: false
  notify:
    - killall

# - name: Reveal IP address, hostname, OS version, etc. when clicking the clock in the login window
#   osx_defaults:
#     domain: /Library/Preferences/com.apple.loginwindow
#     key: AdminHostInfo
#     type: string
#     value: HostName
#   become: true
#   notify:
#     - killall

- name: Check for software updates daily, not just once per week
  osx_defaults:
    domain: com.apple.SoftwareUpdate
    key: ScheduleFrequency
    type: int
    value: 1
  notify:
    - killall

- name: Disable smart quotes as they’re annoying when typing code
  osx_defaults:
    domain: NSGlobalDomain
    key: NSAutomaticQuoteSubstitutionEnabled
    type: bool
    value: false
  notify:
    - killall

- name: Disable smart dashes as they’re annoying when typing code
  osx_defaults:
    domain: NSGlobalDomain
    key: NSAutomaticDashSubstitutionEnabled
    type: bool
    value: false
  notify:
    - killall

# Screen
# ------------------------------------------------------------------------------


# Finder
# ------------------------------------------------------------------------------


# Dock & Mission Control
# ------------------------------------------------------------------------------

- name: Set the icon size of Dock items
  osx_defaults:
    domain: com.apple.dock
    key: tilesize
    type: float
    value: 30
  notify:
    - killall

# - name: Set dock orientation to "Left"
#   osx_defaults:
#     domain: com.apple.dock
#     key: orientation
#     type: string
#     value: "left"
#   notify:
#     - killall

- name: Automatically hide and show the Dock
  osx_defaults:
    domain: com.apple.dock
    key: autohide
    type: bool
    value: true
  notify:
    - killall

- name: Speed up Mission Control animations
  osx_defaults:
    domain: com.apple.dock
    key: expose-animation-duration
    type: float
    value: 0.15
  notify:
    - killall

- name: Don’t automatically rearrange Spaces based on most recent use
  osx_defaults:
    domain: com.apple.dock
    key: mru-spaces
    type: bool
    value: false
  notify:
    - killall

# Safari & WebKit
# ------------------------------------------------------------------------------


# Spotlight
# ------------------------------------------------------------------------------


# Terminal
# ------------------------------------------------------------------------------

# TODO: Can't get this to not fail
# - name: Only use UTF-8 in Terminal.app
#   osx_defaults:
#     domain: com.apple.terminal
#     key: StringEncodings
#     type: array
#     value: [ 4 ]
#   notify:
#     - killall

# Time Machine
# ------------------------------------------------------------------------------

- name: Prevent Time Machine from prompting to use new hard drives as backup volume
  osx_defaults:
    domain: com.apple.TimeMachine
    key: DoNotOfferNewDisksForBackup
    type: bool
    value: true
  notify:
    - killall

# Activity Monitor
# ------------------------------------------------------------------------------

- name: Show the main window when launching Activity Monitor
  osx_defaults:
    domain: com.apple.ActivityMonitor
    key: OpenMainWindow
    type: bool
    value: true
  notify:
    - killall

- name: Show all processes in Activity Monitor
  osx_defaults:
    domain: com.apple.ActivityMonitor
    key: ShowCategory
    type: int
    value: 0
  notify:
    - killall

# TextEdit
# ------------------------------------------------------------------------------

- name: Use plain text mode for new TextEdit documents
  osx_defaults:
    domain: com.apple.TextEdit
    key: RichText
    type: int
    value: 0
  notify:
    - killall

- name: Open and save files as UTF-8 in TextEdit
  osx_defaults:
    domain: com.apple.TextEdit
    key: "{{ item }}"
    type: int
    value: 4
  with_items:
    - PlainTextEncoding
    - PlainTextEncodingForWrite
  notify:
    - killall

- name: Disable smart quotes & smart dashes in TextEdit
  osx_defaults:
    domain: com.apple.TextEdit
    key: "{{ item }}"
    type: bool
    value: false
  with_items:
    - SmartQuotes
    - SmartDashes
  notify:
    - killall
